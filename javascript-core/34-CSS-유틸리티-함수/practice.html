<!doctype html>
<html lang="ko-KR">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="유틸리티 함수 실습문제" />
    <meta charset="UTF-8" />
    <title>레인지 인풋으로 글자 크기 변경</title>
    <style>
      body {
        display: flex;
        justify-content: center;
        height: 100vh;
        margin: 0;
        transition: all 0.3s ease;
      }
      .text {
        font-size: 16px;
        color: #2d3436;
      }

      .slider-container {
        margin-top: 1rem;
      }

      label {
        font-size: 14px;
        margin-right: 8px;
      }

      .card {
        width: 300px;
        padding: 2rem;
        border-radius: 1rem;
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        text-align: center;
        transition: all 0.3s ease;

        /* 초기 스타일 (라이트 모드) */
        background-color: #fff;
        color: #333;
        border: 2px solid #e0e0e0;
      }

      button[data-feature="theme-button"] {
        cursor: pointer;
        margin-top: 1rem;
        padding: 0.5rem 1rem;
      }
    </style>
  </head>
  <body>
    <div class="card">
      <h2>테마 변경</h2>
      <p>버튼을 눌러 다크 모드로 바꿔보세요.</p>
      <button type="button" data-feature="theme-button">다크 모드 켜기</button>
    </div>
    <h1>실습 문제 풀이</h1>
    <p class="text">이 텍스트의 글자 크기를 조절해 보세요!</p>

    <div class="slider-container">
      <label for="font-size-slider">글자 크기</label>
      <input type="range" id="font-size-slider" min="10" max="48" value="16" />
      <output id="font-size-value">16px</output>
    </div>

    <script>
      const text = document.querySelector(".text");
      const slider = document.getElementById("font-size-slider");
      const output = document.getElementById("font-size-value");

      slider.addEventListener("input", () => {
        // [실습 1] 현재 슬라이더의 값을 가져오세요.

        //    /* 여기에 코드 작성 */
        let size = slider.value;
        console.log(size);

        //   // [실습 2] css 함수를 사용하여 .text 요소의 font-size를 변경하세요.
        //   // 힌트: 값 뒤에 'px' 단위를 붙여야 합니다. (예: size + 'px')
        //   /* 여기에 코드 작성 */
        const textEl = document.querySelector(".text");
        function css(element, propertyName, propertyValue) {
          if (!element === null || element.nodeType !== document.ELEMENT_NODE) {
            console.warn("요소 노드가 출력되어야 합니다.");
            return null;
          }
          setStyle(element, propertyName, propertyValue);
          getStyle(element, propertyName);
        }
        setStyle(textEl, "font-size", size + "px");

        // 스타일 변경 함수 만들기
        function setStyle(element, propertyName, propertyValue) {
          element.style.setProperty(propertyName, propertyValue);
        }

        //input 값 변경 (setAttribute 활용한 함수 구현)
        const inputEl = document.querySelector("input");
        function changeInputValue(inputEl, valueProp, value) {
          const valueCalc = inputEl.setAttribute(valueProp, value);
          return valueCalc;
        }
        changeInputValue(inputEl, "value", size);

        //   현재 몇 px인지 화면에 표시
        //   output.textContent = size + "px";
        const outputEl = document.querySelector("output");
        const outputSyle = (outputEl.textContent = size + "px");
      });

      // 실습 5 버튼을 눌러 다크 모드 만들기
      // 버튼 이벤트 안에 css 함수를 넣어야함(재귀 함수 활용, 안전한 코드 프로그래밍)
      // 1단계 css 함수 부품 만들기
      function getStyle(element, prop) {
        getComputedStyle(element).getPropertyValue(prop); // getcomputedsyle만 하면 속성의 모든 객체 반환됨, 특정 속성값만 가져오기
      }
      function setStyle(element, prop, propValue) {
        element.style.setProperty(prop, propValue);
      }
      function removeStyle(element, prop) {
        element.style.removeProperty(prop);
      }

      //2단계 안전한 장치 함수 만들기(객체 타입, 요소 노드 판별 여부 함수)
      function isObject(data) {
        return (
          typeof data === "object" && data !== null && !Array.isArray(data)
        ); // 조건 충족 시 true 반환
      }
      function isElement(node) {
        return node && node.nodeType === document.ELEMENT_NODE; // 조건 충족 시 true 반환
      }
      // 3단계 css 함수 만들기
      function css(element, prop, propValue) {
        if (isObject(prop)) {
          const propList = prop;
          for (const keys in prop) {
            const value = propList[keys];
          }
          css(element, prop, propValue);
        }

        // 조건에 따라 스타일이 다르게 적용(쓰기, 읽기, 삭제)

        if (propValue === undefined) {
          getStyle(element, prop);
        }
        if (propValue === null) {
          removeStyle(element, prop);
        }
        setStyle(element, prop, propValue);
      }
      // 4단계: 스타일 변경
      const body = document.querySelector("body");
      const cardEl = body.querySelector(".card");
      const h2El = body.querySelector("h2");
      const changeDarkMode = body.querySelector(".card p");
      // css(cardEl, "background-color", "black");
      // css(h2El, "color", "white");
      // css(changeDarkMode, "color", "white");

      // 5단계: 이벤트 연결
      const darkMOdeButton = body.querySelector(
        '[data-feature= "theme-button"]',
      );
      let darkMOde = false;
      darkMOdeButton.addEventListener("click", () => {
        css(cardEl, "background-color", "black");
        css(h2El, "color", "white");
        css(changeDarkMode, "color", "white");
      });
    </script>
  </body>
</html>
